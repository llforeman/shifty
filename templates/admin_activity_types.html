{% extends "base.html" %}

{% block title %}Admin - Tipos de Actividad{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <h2>Gestionar Tipos de Actividad</h2>
    <p>Define las actividades que los usuarios pueden seleccionar.</p>

    <!-- Add Form -->
    <div
        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <h3>Añadir Nuevo Tipo</h3>
        <form action="{{ url_for('admin_add_activity_type') }}" method="POST"
            style="display: flex; gap: 10px; flex-wrap: wrap;">
            <input type="text" name="name" placeholder="Ej: Consulta Privada, Gimnasio, Clases..." required
                style="flex: 2; min-width: 200px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <input type="number" name="min_staff" placeholder="Min" min="0"
                style="width: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <input type="number" name="max_staff" placeholder="Max" min="0"
                style="width: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <button type="submit"
                style="background: #48bb78; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">
                Añadir
            </button>
        </form>
    </div>

    <!-- List -->
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3>Tipos Existentes</h3>
        {% if activity_types %}
        <ul style="list-style: none; padding: 0;">
            {% for type in activity_types %}
            <li style="border-bottom: 1px solid #eee; padding: 15px 0;">
                <form action="{{ url_for('admin_update_activity_type', id=type.id) }}" method="POST"
                    style="display: flex; flex-wrap: wrap; gap: 10px; align-items: center;">

                    <input type="text" name="name" value="{{ type.name }}" required
                        style="flex: 2; min-width: 150px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">

                    <div style="display: flex; gap: 5px; align-items: center;">
                        <label style="font-size: 0.9em; color: #666;">Min:</label>
                        <input type="number" name="min_staff" value="{{ type.min_staff or '' }}" min="0" placeholder="-"
                            style="width: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>

                    <div style="display: flex; gap: 5px; align-items: center;">
                        <label style="font-size: 0.9em; color: #666;">Max:</label>
                        <input type="number" name="max_staff" value="{{ type.max_staff or '' }}" min="0" placeholder="-"
                            style="width: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>

                    <div style="display: flex; gap: 5px;">
                        <button type="submit"
                            style="background: #3498db; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                            Guardar
                        </button>
                        <button type="submit" form="delete-form-{{ type.id }}"
                            style="background: #ef4444; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                            Eliminar
                        </button>
                    </div>
                </form>

                <form id="delete-form-{{ type.id }}" action="{{ url_for('admin_delete_activity_type', id=type.id) }}"
                    method="POST" style="display: none;"
                    onsubmit="return confirm('¿Seguro? Esto podría afectar a actividades existentes (se mantendrán pero perderán el tipo).');">
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p style="color: #888;">No hay tipos definidos.</p>
        {% endif %}
    </div>
</div>
{% endblock %}